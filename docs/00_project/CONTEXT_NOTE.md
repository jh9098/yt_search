# CONTEXT_NOTE.md

## 1. 현재 작업 맥락
이 프로젝트는 "유튜브 소재 발굴" 서비스이며, 단순 검색 UI가 아니라
검색 결과에서 바로 "AI 소재 분석"을 실행해 실무형 인사이트를 제공하는 것이 핵심 가치다.

현재 우선순위는:
- 코딩 전에 AI 작업 환경(매뉴얼/기억/품질검사 시스템) 세팅
- 이후 AI 소재 분석 모달의 API/스키마/상태 설계 진행

---

## 2. 핵심 가치(서비스 관점)
사용자는 영상 목록을 보는 것만으로는 충분한 가치를 느끼기 어렵다.
핵심은 특정 영상을 클릭했을 때 아래를 빠르게 얻는 것이다.

- 댓글 반응 요약
- 긍정 포인트 / 아쉬운 점
- 후속 소재 추천
- 추천 키워드 (재검색 연결)

즉, 이 서비스의 차별화 포인트는 "검색"보다 "AI 분석 + 실행 가능한 제안"에 있다.

---

## 3. 화면/UX 맥락 (관찰된 흐름)
관찰된 UX 흐름:
1. "AI 소재 분석" 버튼 클릭
2. 분석중 모달 표시 (로딩 스피너 + 진행 문구)
3. 분석완료 후 결과 표시 (댓글 요약 / 소재 추천 / 키워드 칩)

이 UX는 사용자 체감 대기 시간을 줄이고, 분석 기능의 가치를 직관적으로 전달하는 데 유리하다.

---

## 4. 기술적 맥락 / 예상 이슈
### 4.1 비동기 분석 필요 가능성
분석 시간(댓글 수집 + AI 호출)이 길어질 수 있으므로, 초기에는 동기 처리로 시작하더라도
구조는 `job + status polling` 방식으로 확장 가능하게 설계하는 것이 좋다.

### 4.2 캐시 필요성
동일 영상에 대해 분석 요청이 반복되면 비용/시간 낭비가 크다.
따라서 `video_id + analysis_version` 기준 캐시 전략이 필요하다.

### 4.3 AI 출력 흔들림
Gemini 결과는 자유 텍스트로 받으면 필드 누락/형식 깨짐이 발생할 수 있다.
반드시 JSON 스키마를 정의하고 검증/보정 로직을 둬야 한다.

---

## 5. 설계 의도 (왜 이렇게 가는지)
### 의도 A: 문서 먼저
긴 대화에서 AI가 맥락을 잊는 문제를 줄이기 위해,
코딩 전에 `PLAN / CONTEXT_NOTE / CHECKLIST`를 먼저 만든다.

### 의도 B: 도메인 분리
검색/분석/수집/유저 기능을 도메인별로 나누어,
AI가 작업 범위를 좁게 보고 수정하도록 한다.

### 의도 C: 품질검사 템플릿 운영
AI가 "다 했습니다"라고만 말하지 못하게 하고,
수정 파일/근거/테스트/리스크를 보고하게 한다.

---

## 6. 현재 결정사항 (요약)
- 프론트: React + Vite + TypeScript + Tailwind
- 백엔드: FastAPI
- AI 분석: Gemini API 우선
- 초기 핵심 기능: AI 소재 분석 모달
- 작업 방식: 문서 우선 → 작은 단위 구현 → 체크리스트 갱신

※ 확실하지 않은 사실:
- 유튜브 데이터 수집 방식(공식 API/스크래핑/서드파티) 최종 확정 전
- 분석 진행률 표시를 실제 단계 이벤트로 받을지, 프론트 가짜 단계로 할지 미확정

---

## 7. 이후 바로 이어질 작업 (예정)
1. AGENT/SKILLS/3대문서 템플릿 확정
2. AI 분석 응답 JSON 스키마 정의
3. 백엔드 API 계약 문서 작성 (`api-contracts.md`)
4. analysis job 흐름 문서화
5. 프론트 모달 상태 정의 문서 작성

---

## 8. 사람 검토가 반드시 필요한 영역
- 보안/키 관리 (`.env`, API 키 노출 방지)
- 외부 API 사용량/비용 관리
- 추정치 표시 정책 (예상 수익 등)
- 민감 카테고리(건강/심리/금융) 분석 결과 문구 정책
